<meta charset="utf-8">
<h1>pytextmonitor</h1>

<h2>Информация</h2>

<p>PyTextMonitor - минималистичный плазмоид, написанный на Python2. Он выглядит как виджеты в Awesome WM.</p>

<p><strong>ВНИМАНИЕ</strong> <a href="https://github.com/arcan1s/pytextmonitor/issues/14">НУЖНЫ ПЕРЕВОДЧИКИ!</a></p>

<h2>Настройка</h2>

<p>Для редактирования внешнего вида, откройте окно настроек и установите требуемый формат в поля:</p>

<ul>
<li>тег <code>$time</code> - время в стандартном формате. Например, <em>fri Nov 6 04:48:01 2013</em></li>
<li>тег <code>$isotime</code> - время в ISO формате</li>
<li>тег <code>$shorttime</code> - время в коротком формате</li>
<li>тег <code>$longtime</code> - время в длинном формате</li>
<li>тег <code>$custom</code> - свой формат времени</li>
<li>тег <code>$uptime</code> - время работы, <em>---d--h--m</em></li>
<li>тег <code>$custom</code> - свой формат аптайма</li>
<li>тег <code>$cpu</code> - общая загрузка CPU, <em>%</em></li>
<li>тег <code>$cpuN</code> - загрузка CPU для ядра N, <em>%</em></li>
<li>тег <code>$cpucl</code> - средняя частота CPU, <em>MHz</em></li>
<li>тег <code>$cpuclN</code> - частота CPU для ядра N, *MHz</li>
<li>тег <code>$tempN</code> - температура для устройства N. Например, <code>$temp0</code></li>
<li>тег <code>$gpu</code> - использование GPU, <em>%</em>. <code>aticonfig</code> или <code>nvidia-smi</code> должны быть установлены</li>
<li>тег <code>$gputemp</code> - температура GPU. <code>aticonfig</code> или <code>nvidia-smi</code> должны быть установлены</li>
<li>тег <code>$mem</code> - использование RAM, <em>%</em></li>
<li>тег <code>$memmb</code> - использование RAM, <em>MB</em></li>
<li>тег <code>$memgb</code> - использование RAM, <em>GB</em></li>
<li>тег <code>$memtotmb</code> - RAM, <em>MB</em></li>
<li>тег <code>$memtotgb</code> - RAM, <em>GB</em></li>
<li>тег <code>$swap</code> - swap, <em>%</em></li>
<li>тег <code>$swapmb</code> - swap, <em>MB</em></li>
<li>тег <code>$swapgb</code> - swap, <em>GB</em></li>
<li>тег <code>$swaptotmb</code> - размер swap, <em>MB</em></li>
<li>тег <code>$swaptotgb</code> - размер swap, <em>GB</em></li>
<li>тег <code>$hddN</code> - использование точки монтирования N, <em>%</em>. Например, <code>$hdd0</code></li>
<li>тег <code>$hddmbN</code> - использование точки монтирования N, <em>MB</em>. Например, <code>$hddmb0</code></li>
<li>тег <code>$hddgbN</code> - использование точки монтирования N, <em>GB</em>. Например, <code>$hddgb0</code></li>
<li>тег <code>$hddtotmbN</code> - размер точки монтирования N, <em>MB</em>. Например, <code>$hddtotmb0</code></li>
<li>тег <code>$hddtotgbN</code> - размер точки монтирования N, <em>GB</em>. Например, <code>$hddtotgb0</code></li>
<li>тег <code>$hddrN</code> - скорость записи на диск N, <em>KB/s</em>. Например, <code>$hddr0</code></li>
<li>тег <code>$hddwN</code> - скорость чтения с диска N, <em>KB/s</em>. Например, <code>$hddw0</code></li>
<li>тег <code>$hddtempN</code> - температура HDD N. Например, <code>$hddtemp0</code></li>
<li>тег <code>$down</code> - скорость загрузки, <em>KB/s</em></li>
<li>тег <code>$up</code> - скорость отдачи, <em>KB/s</em></li>
<li>тег <code>$netdev</code> - текущий сетевой интерфейс</li>
<li>тег <code>$bat</code> - заряд батареи, <em>%</em></li>
<li>тег <code>$ac</code> - статус адаптера питания. Возвращает (*), если AC подключен или <em>( )</em>, если нет</li>
<li>тег <code>$album</code> - альбом. Один из поддерживаемых плееров должен быть установлен</li>
<li>тег <code>$artist</code> - исполнитель. Один из поддерживаемых плееров должен быть установлен</li>
<li>тег <code>$progress</code> - прогресс. Один из поддерживаемых плееров должен быть установлен</li>
<li>тег <code>$time</code> - длительность. Один из поддерживаемых плееров должен быть установлен</li>
<li>тег <code>$title</code> - название. Один из поддерживаемых плееров должен быть установлен</li>
<li>тег <code>$pscount</code> - число запущенных процессов</li>
<li>тег <code>$pstotal</code> - общее число процессов</li>
<li>тег <code>$ps</code> - список процессов</li>
<li>тег <code>$pkgcountN</code> - число пакетов, которые могут быть обновлены, для команды N. Например, <code>$pkgcount0</code></li>
<li>тег <code>$customN</code> - возвращает результат своей команды N. Например, <code>$custom0</code></li>
</ul>

<p>Порядок полей изменится, если вы измените позицию слайдеров. HTML теги в полях работают корректно.</p>

<p><strong>ЗАМЕЧАНИЕ</strong> вы не можете установить тег <code>$cpu</code>, например, в поле swap. <strong><code>$cpu</code> будет работать только в поле CPU</strong>.</p>

<h2>Советы и хитрости</h2>

<p>Вы можете использовать различные цвета в полях. Просто вставьте нужный текст в html код. Смотри <a href="https://github.com/arcan1s/pytextmonitor/issues/9">вопрос</a> для более подробной информации.</p>

<p>Нумерация элементов в полях "Температура", "Использование HDD", "Скорость HDD", "Температура HDD" ссылается на порядок элементов во второй вкладке (<em>Расширенные настройки</em>). Вы должны сначала добавить требуемые элементы в нужный listWidget. И первый элемент в listWdiget будет связан c <code>$tag0</code>. Смотри <a href="https://github.com/arcan1s/pytextmonitor/issues/17">вопрос</a> для более подробной информации.</p>

<h2>Расширенные настройки</h2>

<p><strong>Включить фон</strong></p>

<p>Снимите галочку, чтобы отключить стандартный фон виджета и установить прозрачный.</p>

<p><strong>Вертикальная разметка</strong></p>

<p>Использовать вертикальную разметку вместо горизонтальной.</p>

<p><strong>Включить всплывающие сообщения</strong></p>

<p>Нажмите на чекбокс, если вы не используете всплывающие сообщения.</p>

<p><strong>Добавить пустое пространство</strong></p>

<p>Добавить пустое пространство в указанное место виджета.</p>

<p><strong>Свой формат времени</strong></p>

<ul>
<li>тег <code>$dddd</code> - день недели в длинном формате</li>
<li>тег <code>$ddd</code> - день недели в коротком формате</li>
<li>тег <code>$dd</code> - день</li>
<li>тег <code>$d</code> - день без нуля</li>
<li>тег <code>$MMMM</code> - месяц в длинном формате</li>
<li>тег <code>$MMM</code> - месяц в коротком формате</li>
<li>тег <code>$MM</code> - месяц</li>
<li>тег <code>$M</code> - месяц без нуля</li>
<li>тег <code>$yyyy</code> - год</li>
<li>тег <code>$yy</code> - год в коротком формате</li>
<li>тег <code>$hh</code> - часы</li>
<li>тег <code>$h</code> - часы без нуля</li>
<li>тег <code>$mm</code> - минуты</li>
<li>тег <code>$m</code> - минуты без нуля</li>
<li>тег <code>$ss</code> - секунды</li>
<li>тег <code>$s</code> - секунды без нуля</li>
</ul>

<p><strong>Свой формат аптайма</strong></p>

<ul>
<li>тег <code>$dd</code> - дни аптайма</li>
<li>тег <code>$d</code> - дни аптайма без нуля</li>
<li>тег <code>$hh</code> - часы аптайма</li>
<li>тег <code>$h</code> - часы аптайма без нуля</li>
<li>тег <code>$mm</code> - минуты аптайма</li>
<li>тег <code>$m</code> - минуты аптайма без нуля</li>
</ul>

<p><strong>Температурные единицы</strong></p>

<p>Выберите единицы температуры. Доступные единицы следующие: Цельсий, Фаренгейт и Кельвин.</p>

<p><strong>Датчики температуры</strong></p>

<p>Список датчиков, которые будут наблюдаться в поле temo (содержимое комбо бокса берется из <code>sensors</code>). Виджет редактируем, клавиша delete удалит текущую строку.</p>

<p><strong>Точки монтирования</strong></p>

<p>Список точек монтирования, которые будут наблюдаться в поле hdd (содержимое комбо бокса берется из <code>mount</code>). Виджет редактируем, клавиша delete удалит текущую строку.</p>

<p><strong>HDD (скорость)</strong></p>

<p>Список HDD, которые будут наблюдаться в поле hddspeed (содержимое комбо бокса берется из DataEngine). Виджет редактируем, клавиша delete удалит текущую строку.</p>

<p><strong>HDD (температура)</strong></p>

<p>Список HDD, которые будут наблюдаться в поле hddtemp (содержимое комбо бокса берется из <code>find</code>). Виджет редактируем, клавиша delete удалит текущую строку.</p>

<p><strong>Директория с сетевыми интерфейсами</strong></p>

<p>Путь к директории, которая содержит информацию о сетевых интерфейсах. По умолчанию <code>/sys/class/net</code>. Требуется для определения сетевого устройства.</p>

<p><strong>Сетевое устройство</strong></p>

<p>Использовать указанный интерфейс, как активный. Содержимое комбо бокса берется из <strong>директории с сетевыми интерфейсами</strong>. Эта опция отключит автоопределение интерфейса.</p>

<p><strong>Устройство батареи</strong></p>

<p>Файл с информацией о батарее. Данный файл (<code>/sys/class/power_supply/BAT0/capacity</code> по умолчанию) должен содержать только заряд батареи в процентах.</p>

<p><strong>AC online тег</strong></p>

<p>Строка, которая будет показана, когда AC онлайн.</p>

<p><strong>AC offline тег</strong></p>

<p>Строка, которая будет показана, когда AC оффлайн.</p>

<p><strong>Устройство AC</strong></p>

<p>Файл с информацией об адаптере питания. Данный файл (<code>/sys/class/power_supply/AC/online</code> по умолчанию) должен содержать <code>1</code>, если адаптер подключен.</p>

<h2>Настройки тултипа</h2>

<p>Начиная с версии 1.7.0 поля "CPU", "Частота CPU", "Память", "Swap" и "Сеть" поддерживают графический тултип. Чтобы включить их, просто сделайте требуемые чекбоксы полностью чекнутыми. Число хранимых значений может быть выставленно в данной вкладке. Цвета графиков также настраиваются.</p>

<h2>Настройки DataEngine</h2>

<p><strong>Своя команда</strong></p>

<p><em>ЗАМЕЧАНИЕ</em> Может вызвать зависание компьютера.</p>

<p>Команды, которые будут запущены для соответствующего поля.</p>

<p><strong>Устройство GPU</strong></p>

<p>Выберите одно из поддерживаемых устройств GPU. <code>auto</code> включит автоматическое определение, <code>disable</code> отключит все мониторы GPU. По умолчанию <code>auto</code>.</p>

<p><strong>HDD</strong></p>

<p>Выберете один из HDD для монитора его температуры. <code>all</code> включит монитор для всех доступных устройств, <code>disable</code> отключит определение температуры HDD. По умолчанию <code>all</code>.</p>

<p><strong>Команда hddtemp</strong></p>

<p>Введите команду, которая будет запущена для hddtemp DataEngine. По умолчанию <code>sudo hddtemp</code>.</p>

<p><strong>Адрес MPD</strong></p>

<p>Адрес MPD сервера. По умолчанию <code>localhost</code>.</p>

<p><strong>Порт MPD</strong></p>

<p>Порт MPD сервера. По умолчанию <code>6600</code>.</p>

<p><strong>Package manager</strong></p>

<p>Список команд, которые будут запущены. Число пустых строк - число ненужных для подсчета строк. Стандартные настройки:</p>

<ul>
<li><em>Arch</em>: <code>PKGCMD=pacman -Qu</code>, <code>PKGNULL=0</code></li>
<li><em>Debian</em>: <code>PKGCMD=apt-show-versions -u -b</code>, <code>PKGNULL=0</code></li>
<li><em>Ubuntu</em>: <code>PKGCMD=aptitude search '~U'</code>, <code>PKGNULL=0</code></li>
<li><em>Fedora</em>: <code>PKGCMD=yum list updates</code>, <code>PKGNULL=3</code></li>
<li><em>FreeBSD</em>: <code>PKGCMD=pkg_version -I -l '&lt;'</code>, <code>PKGNULL=0</code></li>
<li><em>Mandriva</em>: <code>PKGCMD=urpmq --auto-select</code>, <code>PKGNULL=0</code></li>
</ul>

<p><strong>Музыкальный плеер</strong></p>

<p>Выберите один из поддерживаемых музыкальных плееров.</p>

<h2>Настройка DataEngine</h2>

<p>Вы можете отредактировать настройки DataEngine вручную. Откройте файл <code>/usr/share/config/extsysmon.conf</code> или <code>$HOME/.kde4/share/config/extsysmon.conf</code>, в зависимости от типа установки. Раскомментируйте требуемые строки и отредактируйте их.</p>

<h1>Инструкция</h1>

<h2>Зависимости</h2>

<ul>
<li>kdebase-workspace</li>
<li>kdebindings-python2</li>
<li>lm_sensors (<em>для определения датчиков температуры</em>)</li>
</ul>

<h2>Опциональные зависимости</h2>

<ul>
<li>sysstat (<em>для уведомлений</em>)</li>
<li>проприетарный видеодрайвер</li>
<li>hddtemp (убедитесь, что может быть запущен с <code>sudo</code> без пароля. Просто добавьте следующую строку в <code>/etc/sudoers</code>: <code>$USERNAME ALL=NOPASSWD: /usr/bin/hddtemp</code>)</li>
<li>музыкальный плеер (amarok, clementine, mpd или qmmp)</li>
</ul>

<h2>Зависимости сборки</h2>

<ul>
<li>automoc4</li>
<li>cmake</li>
</ul>

<h2>Установка</h2>

<ul>
<li>скачать исходный архив</li>
<li><p>установить</p>

<pre><code>mkdir build &amp;&amp; cd build
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=`kde4-config --localprefix` ../
make &amp;&amp; make install
</code></pre>

<p>Для установки в <code>/</code>:</p>

<pre><code>mkdir build &amp;&amp; cd build
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` ../
make &amp;&amp; sudo make install
</code></pre></li>
</ul>

<h1>Дополнительная информация</h1>

<h2>TODO (wish list)</h2>

<h2>Ссылки</h2>

<ul>
<li><a href="http://arcanis.name/projects/pytextmonitor/">Домашняя страница</a></li>
<li>Виджет на <a href="http://kde-look.org/content/show.php/Py+Text+Monitor?content=157124">kde-look</a></li>
<li>DataEngine на <a href="http://kde-look.org/content/show.php/Extended+Systemmonitor+DataEngine?content=158773">kde-look</a></li>
<li>Пакет для Archlinux в <a href="https://aur.archlinux.org/packages/kdeplasma-applets-pytextmonitor/">AUR</a></li>
</ul>
